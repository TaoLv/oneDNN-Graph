<!-- HTML header for doxygen 1.8.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>oneDNN Graph: Build Options</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script src="assets/mathjax/MathJax.js?config=TeX-AMS_CHTML,dnnl"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="assets/customdoxygen.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="assets/dnn.js"></script>
</head>
<body>
<div class="mobile-nav"><i id="nav-btn"></i><a href="index.html">oneAPI Deep Neural Network Library Graph API (oneDNN Graph)</a></div>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
   <div id="projectname">
     <a href="index.html">
      <div id="full-name">oneAPI Deep Neural Network Library Graph API (oneDNN Graph)</div>
    </a>
   </div>
   <div id="projectbrief">Performance Library for DNN Graph Optimization</div>
   <div id="projectnumber">0.9.0</div>
  <div>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('dev_guide_build_options.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Build Options </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_doc_build_build_options"></a> oneDNN Graph supports the following build-time options.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">CMake Option   </th><th class="markdownTableHeadLeft">Supported values (defaults in bold)   </th><th class="markdownTableHeadLeft">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">DNNL_GRAPH_LIBRARY_TYPE   </td><td class="markdownTableBodyLeft"><b>SHARED</b>, STATIC, SDL   </td><td class="markdownTableBodyLeft">Defines the resulting library type    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">DNNL_GRAPH_CPU_RUNTIME   </td><td class="markdownTableBodyLeft"><b>OMP</b>, TBB, SEQ, THREADPOOL, DPCPP   </td><td class="markdownTableBodyLeft">Defines the threading runtime for CPU engines    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">DNNL_GRAPH_GPU_RUNTIME   </td><td class="markdownTableBodyLeft"><b>NONE</b>, DPCPP   </td><td class="markdownTableBodyLeft">Defines the offload runtime for GPU engines    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">DNNL_GRAPH_BUILD_EXAMPLES   </td><td class="markdownTableBodyLeft">ON, <b>OFF</b>   </td><td class="markdownTableBodyLeft">Controls building the examples    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">DNNL_GRAPH_BUILD_TESTS   </td><td class="markdownTableBodyLeft">ON, <b>OFF</b>   </td><td class="markdownTableBodyLeft">Controls building the tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">DNNL_GRAPH_VERBOSE   </td><td class="markdownTableBodyLeft"><b>ON</b>, OFF   </td><td class="markdownTableBodyLeft">Enables verbose mode    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">DNNL_GRAPH_SUPPORT_CXX17   </td><td class="markdownTableBodyLeft">ON, <b>OFF</b>   </td><td class="markdownTableBodyLeft">Enables features from c++ standard 17 (gcc/clang &gt;= 5)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">DNNL_GRAPH_ENABLE_COMPILED_PARTITION_CACHE   </td><td class="markdownTableBodyLeft"><b>ON</b>, OFF   </td><td class="markdownTableBodyLeft">Enables compiled partition cache    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">DNNL_GRAPH_ENABLE_DUMP   </td><td class="markdownTableBodyLeft">ON, <b>OFF</b>   </td><td class="markdownTableBodyLeft">Enables graphs and pattern file dump    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">DNNL_GRAPH_BUILD_COMPILER_BACKEND   </td><td class="markdownTableBodyLeft">ON, <b>OFF</b>   </td><td class="markdownTableBodyLeft">Enables building graph compiler backend    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">DNNL_GRAPH_LLVM_CONFIG   </td><td class="markdownTableBodyLeft"><b>AUTO</b>, {llvm-config EXECUTABLE}   </td><td class="markdownTableBodyLeft">Defines the method for detecting/configuring LLVM   </td></tr>
</table>
<p>All other building options or values that can be found in CMake files are intended for development/debug purposes and are subject to change without notice. Please avoid using them.</p>
<p>Note that graph compiler backend only supports <b>OMP</b> as its threading runtime for CPU engines so far, other threading runtimes shall be supported in future and currently will result in fatal error.</p>
<h1><a class="anchor" id="autotoc_md9"></a>
Build Graph Compiler</h1>
<p>oneDNN Graph provides more aggresive operator fusion ability via compiler technology. To enable the feature, users need to set <code>DNNL_GRAPH_BUILD_COMPILER_BACKEND=ON</code> explicitly in the CMake command line:</p>
<div class="fragment"><div class="line">cmake .. -DDNNL_GRAPH_BUILD_COMPILER_BACKEND=ON</div>
<div class="line">~~~~</div>
<div class="line"> </div>
<div class="line">Or change the default value in [options.cmake](../../cmake/options.cmake:104) to</div>
<div class="line">`ON`:</div>
<div class="line"> </div>
<div class="line">~~~sh</div>
<div class="line">option(DNNL_GRAPH_BUILD_COMPILER_BACKEND &quot;builds graph compiler backend&quot; ON)</div>
</div><!-- fragment --><p>Option <code>DNNL_GRAPH_LLVM_CONFIG</code> is only valid when <code>DNNL_GRAPH_BUILD_COMPILER_BACKEND=ON</code>.</p>
<h1><a class="anchor" id="autotoc_md10"></a>
Common Options</h1>
<h2><a class="anchor" id="autotoc_md11"></a>
CPU Options</h2>
<p>Intel Architecture Processors and compatible devices are supported by oneDNN Graph CPU engine. The CPU engine is built by default and cannot be disabled at build time.</p>
<h3><a class="anchor" id="autotoc_md12"></a>
CPU Runtimes</h3>
<p>CPU engine can use OpenMP, Threading Building Blocks (TBB) or sequential threading runtimes. OpenMP threading is the default build mode. This behavior is controlled by the <code>DNNL_GRAPH_CPU_RUNTIME</code> CMake option. Currently, this option will be directly passed to DNNL build option <code>DNNL_CPU_RUNTIME</code> and not affect the behavior of oneDNN Graph itself.</p>
<h4><a class="anchor" id="autotoc_md13"></a>
OpenMP</h4>
<p>oneDNN Graph uses OpenMP runtime library provided by the compiler.</p>
<dl class="section warning"><dt>Warning</dt><dd>Because different OpenMP runtimes may not be binary-compatible, it's important to ensure that only one OpenMP runtime is used throughout the application. Having more than one OpenMP runtime linked to an executable may lead to undefined behavior including incorrect results or crashes. However as long as both the library and the application use the same or compatible compilers there would be no conflicts.</dd></dl>
<h2><a class="anchor" id="autotoc_md14"></a>
GPU Options</h2>
<p>Intel Processor Graphics is supported by oneDNN Graph GPU engine. GPU engine is disabled in the default build configuration.</p>
<h3><a class="anchor" id="autotoc_md15"></a>
GPU Runtimes</h3>
<p>To enable GPU support you need to specify the GPU runtime by setting <code>DNNL_GRAPH_GPU_RUNTIME</code> CMake option. The default value is <code>"NONE"</code> which corresponds to no GPU support in the library. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="footer">
    <script>
        $('#top').prependTo($('#side-nav'));
    </script>
    <div class="footer-wrapper">
        <hr>
        <ul class="footer-links">
            <li><a href="legal_information.html">Legal information</a></li>
        </ul>
    </div>
</div>